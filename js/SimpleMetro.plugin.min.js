(function(n,t){var o=this,e=[],r={},f,u;(function(){var t=["log","warn","info","error"];for(i=0;i<t.length;++i)n.console&&n.console[t[i]]?r[t[i]]=function(r){n.console[t[i]](r)}:(r[t[i]]=function(n){var t={};t[this.cmd_name]=n;e.push(t)},r[t[i]].cmd_name=t[i])})();f=function(n,t,i){var r=function(n,t,i){var r=0,u=this;this.time_proc=function(){setTimeout(function(){Date.now()-r<t?u.time_proc():(r=0,i())},parseInt(t/10))};n.bind("resize",function(){Date.now()-r>=t&&(r=Date.now(),u.time_proc())})},u=new r(n,t,i);return u.time_proc};u=function(n){n&&n.container_style&&(n.container_style=t.extend(this.SimpleFliud.options.container_style,n.container_style));n.wrapper=n.wrapper?n.wrapper:n.container;this._init(n)};u.prototype={options:{resize_duration:300,duration:500,panel_width:null,margin_cols:5,margin_row:5,container:null,wrapper:null,panel:"div",auto_width:!1,action_type:"immediately",animation_easing:"swing",container_style:{position:"relative"},event_onchange:function(){},event_afterchange:function(){}},container:null,wrapper:null,panels:[],maxYs:[],cols_num:0,panel_wrapper:function(n,i){var r=t(n);return r.change(function(){i()}),r},_init:function(i){var u=this,r,o,e;for(this.options=t.extend(this.options,i),this.options=this.options,r=this.options,u.container=t(r.container),u.wrapper=r.wrapper==r.container?u.container:t(r.wrapper),(!r.panel_width||isNaN(r.panel_width))&&(r.panel_width=t(r.panel,u.container).filter(":first").outerWidth(!0)),o=f(t(n),r.resize_duration,function(){r.event_onchange(u);u._reloadContainer(r.event_afterchange)}),t.each(t(r.panel,u.container),function(){u.panels.push(u.panel_wrapper(this,o))}),u.container.css({position:r.container_style.position}),e=0;e<u.panels.length;++e)u.panels[e].css({position:"absolute"});r.event_onchange(u);u._reloadContainer(r.event_afterchange)},_setContainerWidth:function(n,t){this.container.width()!=n&&(this.wrapper!=this.container?this._action(this.options.action_type).container.width(n,t):t&&typeof t=="function"&&t())},_calcColumns:function(n){var t=this;return Math.min(t.cols_num,Math.ceil((n-t.options.panel_width)/(t.options.panel_width+t.options.margin_row))+1)},_calcWidth:function(n){return n*this.options.panel_width+(n-1)*this.options.margin_cols},_reloadContainer:function(n){var t=this,r=t.options,i;t.cols_num=Math.floor((t.wrapper.innerWidth()-t.options.panel_width)/(t.options.panel_width+t.options.margin_row)+1);i=t._calcWidth(t.cols_num);t._setContainerWidth(i,function(){t._reloadPanels(n);t._action(t.options.action_type).container.height(Math.max.apply(Math,t.maxYs.slice(0,t.maxYs.length))-t.options.margin_row)})},_setPanelPosition:function(n,t,i){var r=this,u;for(r.options.auto_width&&n.width(r._calcWidth(t.ce-t.c)),u=t.c;u<t.ce;++u)r.maxYs[u]=t.y+r.options.margin_row+n.outerHeight();r._action(r.options.action_type).panel.position(n,{left:t.c*(r.options.margin_cols+r.options.panel_width),top:t.y},i);i&&typeof i=="function"&&i()},_reloadPanels:function(n){var i=this,u,r;for(i.maxYs=[],u=i.cols_num;u--;)i.maxYs.push(0);r=0;t.each(i.panels,function(){var t=i._calcColumns(this.outerWidth()),u=i._getPosition(t);u.ce=t=u.c+t;i._setPanelPosition(this,u,function(){r++;r==i.panels.length&&n&&typeof n=="function"&&n()})})},_getPosition:function(n){var r,i,t,u;if(n==this.cols_num)return{c:0,y:Math.max.apply(Math,this.maxYs)};for(r=0,i=Math.max.apply(Math,this.maxYs.slice(0,n)),t=0;t+n<=this.cols_num;++t)u=Math.max.apply(Math,this.maxYs.slice(t,t+n)),u<i&&(r=t,i=u);return{c:r,y:i}},_action:function(n){var t=this,i={immediately:{container:{width:function(n,i){i=i||function(){};t.container.width(n);i()},height:function(n,i){i=i||function(){};t.container.height(n);i()}},panel:{position:function(n,t,i){i=i||function(){};n.css({left:t.left,top:t.top});i()}}},animation:{container:{width:function(n,i){i=i||function(){};t.container.stop().animate({width:n},t.options.duration,t.options.animation_easing,function(){i()})},height:function(n,i){i=i||function(){};t.container.stop().animate({height:n},t.options.duration,t.options.animation_easing,function(){i()})}},panel:{position:function(n,i,r){r=r||function(){};n.stop().animate({left:i.left,top:i.top},t.options.duration,t.options.animation_easing,function(){r()});r()}}}};return i[n]}};t.SimpleFliud=function(n){return new u(n)};t.fn.SimpleFliud=function(n){n.container=this.selector;t.SimpleFliud(n)}})(window,jQuery);
/*
//# sourceMappingURL=SimpleMetro.plugin.min.js.map
*/